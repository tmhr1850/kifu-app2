# 将棋対戦アプリ MVP要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
将棋対戦アプリ（仮称：Kifu-App）

### 1.2 目的
コンピューターと将棋を対戦できるWebアプリケーションのMVP（Minimum Viable Product）を開発する。

### 1.3 対象ユーザー
- 将棋を楽しみたい初心者から中級者
- 手軽にコンピューターと対戦したい人

## 2. 機能要件

### 2.1 必須機能（MVP）

#### 2.1.1 対局機能
- **将棋盤の表示**
  - 9×9マスの将棋盤を表示
  - 駒の初期配置を正しく表示
  
- **駒の移動**
  - プレイヤーが駒をクリック/タップで選択
  - 移動可能なマスをハイライト表示
  - 有効な移動先をクリック/タップで駒を移動
  - 不正な移動の禁止

- **基本ルールの実装**
  - 各駒の正しい動きの実装（歩、香、桂、銀、金、角、飛、玉）
  - 駒の成り機能
  - 駒を取る機能
  - 持ち駒の表示と使用

#### 2.1.2 コンピューター対戦
- **AI機能**
  - 基本的なAI（ランダムまたは簡単なアルゴリズム）
  - 合法手の中から手を選択
  - 即座に応答（思考時間1秒以内）

#### 2.1.3 対局管理
- **ゲームフロー**
  - 先手・後手の決定（プレイヤーは常に先手）
  - 手番の管理と表示
  - 王手の判定と表示
  - 詰みの判定と勝敗決定
  - 投了機能

- **対局終了処理**
  - 勝敗の表示
  - 新規対局の開始

### 2.2 非機能要件

#### 2.2.1 パフォーマンス
- ページロード時間：3秒以内
- 駒の移動レスポンス：即座（100ms以内）
- AI思考時間：1秒以内

#### 2.2.2 ユーザビリティ
- 直感的な操作性
- レスポンシブデザイン（PC/タブレット対応）
- 視認性の高い駒と盤面

#### 2.2.3 技術要件
- フレームワーク：Next.js 15.3.3
- 言語：TypeScript
- スタイリング：TailwindCSS v4
- アーキテクチャ：クリーンアーキテクチャ
- 開発手法：TDD（テスト駆動開発）

## 3. 画面構成

### 3.1 メイン画面
- 将棋盤エリア（中央）
- 先手の持ち駒エリア（下部）
- 後手の持ち駒エリア（上部）
- 操作ボタン（投了、新規対局）
- 手番表示
- メッセージエリア（王手、詰み等の表示）

## 4. 制約事項

### 4.1 MVP段階での除外機能
- 対人対戦機能
- 棋譜の保存・読み込み
- AI難易度設定
- 時間制限
- 待った（手戻し）機能
- 音声・効果音
- アニメーション効果
- 詳細な対局履歴

### 4.2 技術的制約
- ブラウザ対応：Chrome、Firefox、Safari、Edgeの最新版
- モバイル対応：MVP段階では優先度低（タブレットまで）

## 5. 今後の拡張予定

### Phase 2
- AI難易度設定（初級・中級・上級）
- 棋譜の保存と読み込み
- 待った機能
- 対局履歴

### Phase 3
- オンライン対人対戦
- 詳細な棋譜解析
- 定跡データベース
- モバイル完全対応

## 6. 成功基準

### 6.1 MVP完成の定義
- プレイヤーがコンピューターと完全な一局を対戦できる
- 将棋の基本ルールが正しく実装されている
- UIが直感的で使いやすい
- 主要なバグがない

### 6.2 品質基準
- 単体テストカバレッジ：80%以上
- E2Eテストで主要フローが動作確認済み
- レスポンシブデザインが実装済み